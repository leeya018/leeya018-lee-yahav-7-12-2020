(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),s=a(23),c=a.n(s),o=(a(68),a(12)),i=a(9),l=a(8),d=a(17),j=a(11);function u(e){var t=e.onHandleLogged;return Object(n.jsx)("div",{children:Object(n.jsx)(j.a,{onClick:function(){localStorage.removeItem("data"),t(!1)},children:"Logout"})})}var b={getUsername:function(){var e=localStorage.getItem("data");return e?JSON.parse(e).username:""},getToken:function(){var e=localStorage.getItem("data");return e?JSON.parse(e).token:""}},h=(a(69),a(61)),m=function(){var e=localStorage.getItem("data");return JSON.parse(e).token},O=a.n(h).a.create({baseURL:"http://localhost:3000/api"}),g={insertEmail:function(e){return O.post("/email",e)},getAllEmails:function(){return O.get("/emails")},getEmailsByUsername:function(e){return O.get("/emails/".concat(e),{headers:{Authorization:m()}})},deleteEmail:function(e){return O.delete("/email",e)},sign:function(e){return O.post("/auth/signup",e)},login:function(e){return O.post("/auth/signin",e)}},p={sender:b.getUsername(),receiver:"",message:"",subject:"",alert:"",validations:[],showSuccess:!1,showFail:!1};function x(e,t){switch(t.type){case"subject":return Object(i.a)(Object(i.a)({},e),{},{subject:t.payload});case"sender":return Object(i.a)(Object(i.a)({},e),{},{sender:t.payload});case"receiver":return Object(i.a)(Object(i.a)({},e),{},{receiver:t.payload});case"message":return Object(i.a)(Object(i.a)({},e),{},{message:t.payload});case"alert":return Object(i.a)(Object(i.a)({},e),t.payload);default:throw new Error}}function v(e){var t=e.logged,a=e.onHandleLogged,s=Object(r.useReducer)(x,p),c=Object(o.a)(s,2),i=c[0],h=c[1];Object(r.useEffect)((function(){h({type:"sender",payload:b.getUsername()})}),[]);return Object(n.jsxs)("div",{className:"composeEmail",children:[localStorage.getItem("data")&&Object(n.jsxs)("div",{children:["Hello ".concat(b.getUsername()),Object(n.jsx)(u,{onHandleLogged:a})]}),Object(n.jsx)("h1",{children:"Compose Email:"}),Object(n.jsx)(l.a,{children:Object(n.jsxs)(l.a.Group,{controlId:"email",children:[Object(n.jsx)(l.a.Control,{placeholder:"sender id",disabled:!0===t,value:i.sender,onChange:function(e){return h({type:"sender",payload:e.target.value})}}),Object(n.jsx)(l.a.Control,{placeholder:"subject",value:i.subject,onChange:function(e){return h({type:"subject",payload:e.target.value})}}),Object(n.jsx)(l.a.Control,{placeholder:"receiver id",value:i.receiver,onChange:function(e){return h({type:"receiver",payload:e.target.value})}}),Object(n.jsx)(l.a.Control,{as:"textarea",placeholder:"message",value:i.message,onChange:function(e){return h({type:"message",payload:e.target.value})}}),Object(n.jsx)(j.a,{variant:"primary",className:"submit",onClick:function(){var e=i.subject,t=i.receiver,a=i.sender,n=i.message;g.insertEmail({subject:e,receiver:t,sender:a,message:n}).then((function(e){h({type:"alert",payload:{alert:e.data.message,showSuccess:!0,showFail:!1,receiver:"",sender:b.getUsername(),subject:"",message:""}})})).catch((function(e){!1===e.response.data.validation?h({type:"alert",payload:{validations:e.response.data.errors,showSuccess:!1,showFail:!0}}):h({type:"alert",payload:{alert:e.err.response.data.error,showSuccess:!1,showFail:!0}})}))},children:"SUBMIT"})]})}),Object(n.jsx)(d.a,{show:i.showSuccess,variant:"success",children:i.alert}),Object(n.jsx)("ul",{children:i.validations.length>0?i.validations.map((function(e,t){return Object(n.jsx)("li",{className:"validations",children:Object(n.jsx)(d.a,{show:i.showFail,variant:"danger",children:e},t)},t)})):Object(n.jsx)(d.a,{show:i.showFail,variant:"danger",children:i.alert})})]})}var f=a(46),y=a(33);function w(e){var t=e.show,a=e.onHandleClose,r=e.chosenEmail,s=e.onHandleDelete;return Object(n.jsx)("div",{children:Object(n.jsxs)(y.a,{show:t,onHide:a,animation:!1,children:[Object(n.jsx)(y.a.Header,{closeButton:!0,children:Object(n.jsx)(y.a.Title,{children:"Delete Modal"})}),Object(n.jsxs)(y.a.Body,{children:[Object(n.jsxs)("p",{children:[" id: ",r._id]}),Object(n.jsxs)("p",{children:["subject: ",r.subject]}),Object(n.jsxs)("p",{children:["sender: ",r.sender]}),Object(n.jsxs)("p",{children:["receiver: ",r.receiver]}),Object(n.jsxs)("p",{children:["message: ",r.message]})]}),Object(n.jsxs)(y.a.Footer,{children:[Object(n.jsx)(j.a,{variant:"secondary",onClick:a,children:"Close"}),Object(n.jsx)(j.a,{variant:"danger",onClick:function(){return s(r._id)},children:"Delete"})]})]})})}var S=a(27);function C(e){var t=e.index,a=e.openModal,r=e.email,s=e.modalShow,c=e.closeModal,o=e.deleteEmail;return Object(n.jsx)(f.a.Item,{children:Object(n.jsxs)(S.a,{border:"primary",className:"text-center",children:[Object(n.jsxs)(S.a.Body,{children:[Object(n.jsx)(S.a.Title,{children:"subject: ".concat(r.subject)}),Object(n.jsx)(S.a.Text,{children:"sender: ".concat(r.sender)}),Object(n.jsx)(S.a.Text,{children:"receiver: ".concat(r.receiver)}),Object(n.jsx)(S.a.Text,{children:"message: ".concat(r.message)})]}),Object(n.jsx)(w,{show:s,onHandleClose:c,onHandleDelete:o,chosenEmail:r}),Object(n.jsx)(j.a,{variant:"danger",onClick:a,children:"Delete"})]})},t)}var E={emailsList:[],alert:"",showFail:!1,modalShow:!1,isSender:!0};function L(e,t){switch(t.type){case t.type:return Object(i.a)(Object(i.a)({},e),t.payload);default:throw new Error}}function k(e){var t=e.onHandleLogged,a=e.logged,s=Object(r.useReducer)(L,E),c=Object(o.a)(s,2),l=c[0],h=c[1];Object(r.useEffect)((function(){m()}),[a]);var m=function(){var e=b.getUsername();e?g.getEmailsByUsername(e).then((function(e){h({type:"emailsList",payload:{emailsList:e.data.emails}})})).catch((function(e){h({type:"alert",payload:{emailsList:[],alert:e.response.data.error,showFail:!0}})})):g.getAllEmails().then((function(e){h({type:"emailsList",payload:{emailsList:e.data.emails}})})).catch((function(e){h({type:"alert",payload:{emailsList:[],alert:e.response.data.error,showFail:!0}})}))},O=function(e){g.deleteEmail({data:{id:e}}).then((function(e){m(),p()})).catch((function(e){h({type:"alert",payload:{alert:e.response.data.error,showFail:!0}})}))},p=function(){h({type:"close modal",payload:{modalShow:!1}})};return Object(n.jsxs)("div",{className:"showEmails",children:[localStorage.getItem("data")&&Object(n.jsxs)("div",{children:["Hello ".concat(b.getUsername()),Object(n.jsx)(u,{onHandleLogged:t})]}),Object(n.jsx)("h1",{children:"Emails List:"}),a&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.a,{style:{margin:"1px"},variant:"primary",onClick:function(){return h({type:"update isSender",payload:Object(i.a)(Object(i.a)({},l),{},{isSender:!0})})},children:" sent "}),Object(n.jsx)(j.a,{style:{margin:"1px"},variant:"primary",onClick:function(){return h({type:"update isSender",payload:Object(i.a)(Object(i.a)({},l),{},{isSender:!1})})},children:" inbox "})]}),Object(n.jsx)(f.a,{variant:"flush",children:Object(n.jsx)("ul",{children:l.emailsList.map((function(e,t){var r;if(r=l.isSender?e.sender:e.receiver,!a||b.getUsername()===r)return Object(n.jsx)(C,{index:t,email:e,modalShow:l.modalShow,closeModal:p,deleteEmail:O,openModal:function(){return h({type:"open modal",payload:{modalShow:!0}})}})}))})}),Object(n.jsx)(d.a,{show:l.showFail,variant:"danger",children:l.alert})]})}var H=a(24);function I(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],s=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),u=i[0],b=i[1],h=Object(r.useState)([]),m=Object(o.a)(h,2),O=m[0],p=m[1],x=Object(r.useState)(!1),v=Object(o.a)(x,2),f=(v[0],v[1],Object(r.useState)(!1)),y=Object(o.a)(f,2);y[0],y[1];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h1",{children:"Sign"}),Object(n.jsxs)(l.a,{children:[Object(n.jsx)(l.a.Group,{controlId:"formBasicEmail",children:Object(n.jsx)(l.a.Control,{placeholder:"Enter username",onChange:function(e){return s(e.target.value)}})}),Object(n.jsx)(l.a.Group,{controlId:"formBasicPassword",children:Object(n.jsx)(l.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return b(e.target.value)}})}),Object(n.jsx)(j.a,{variant:"primary",onClick:function(){g.sign({username:a,password:u}).then((function(e){Object(H.navigate)("/login")})).catch((function(e){!1===e.response.data.validation?p(e.response.data.errors):p([e.response.data.message])}))},children:"Submit"})]}),Object(n.jsx)("ul",{children:O.map((function(e,t){return Object(n.jsx)("li",{children:Object(n.jsx)(d.a,{show:!0,variant:"danger",children:e})},t)}))})]})}function N(e){var t=e.logged,a=e.onHandleLogged,s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],u=c[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),m=h[0],O=h[1],p=Object(r.useState)([]),x=Object(o.a)(p,2),v=x[0],f=x[1];Object(r.useEffect)((function(){t&&Object(H.navigate)("/emailslist")}),[t]);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h1",{style:{color:"blue"},children:"Login"}),Object(n.jsxs)(l.a,{children:[Object(n.jsx)(l.a.Group,{controlId:"formBasicEmail",children:Object(n.jsx)(l.a.Control,{placeholder:"Enter username",onChange:function(e){return function(e){f([]),u(e.target.value)}(e)}})}),Object(n.jsx)(l.a.Group,{controlId:"formBasicPassword",children:Object(n.jsx)(l.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return function(e){f([]),O(e.target.value)}(e)}})}),Object(n.jsx)(j.a,{variant:"primary",className:"submit",onClick:function(){g.login({username:i,password:m}).then((function(e){var t={token:e.data.token,username:i};localStorage.setItem("data",JSON.stringify(t)),a(!0),Object(H.navigate)("/emailslist")})).catch((function(e){!1===e.response.data.validation?f(e.response.data.errors):f([e.response.data.message])}))},children:"SUBMIT"}),v.map((function(e,t){return Object(n.jsx)(d.a,{show:!0,variant:"danger",children:e},t)}))]})]})}var F=a(62),U=a(34);a(101);var B=function(){var e=Object(r.useState)(""!==b.getUsername()),t=Object(o.a)(e,2),a=t[0],s=t[1],c={"/":function(){return Object(H.navigate)("/login")},"/login":function(){return Object(n.jsx)(N,{logged:a,onHandleLogged:s})},"/signup":function(){return Object(n.jsx)(I,{})},"/composeemail":function(){return Object(n.jsx)(v,{logged:a,onHandleLogged:s})},"/emailslist":function(){return Object(n.jsx)(k,{logged:a,onHandleLogged:s})}},i=Object(H.useRoutes)(c),l=Object(n.jsx)(F.a,{fixed:"top",expand:"lg",variant:"light",bg:"light",children:Object(n.jsxs)(U.a,{className:"mr-auto",children:[Object(n.jsx)(U.a.Link,{href:"/emailslist",children:"emailslist"}),Object(n.jsx)(U.a.Link,{href:"/composeemail",children:"compose email"}),!a&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(U.a.Link,{href:"/login",children:"login"}),Object(n.jsx)(U.a.Link,{href:"/signup",children:"sign "})]})]})});return Object(n.jsxs)("div",{className:"App",children:[l,Object(n.jsx)("div",{className:"comp-start",children:i})]})};a(102),a(103);c.a.render(Object(n.jsx)(B,{}),document.getElementById("root"))},68:function(e,t,a){},69:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.9a542f01.chunk.js.map